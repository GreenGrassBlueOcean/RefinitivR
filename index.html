<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Connect to Datastream and python Eikon api in r • Refinitiv</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Connect to Datastream and python Eikon api in r">
<meta name="description" content="R interface to the Eikon Python api using reticulate and to DataStream using the DatastreamDSWS2R package. This package is in no way affiliated with Thomson Reuters,Refinitv, Eikon or Datastream. Use at own risk. This package makes use of the DatastreamDSWS2R package from CharlesCara on Github for DataStream Connections.">
<meta property="og:description" content="R interface to the Eikon Python api using reticulate and to DataStream using the DatastreamDSWS2R package. This package is in no way affiliated with Thomson Reuters,Refinitv, Eikon or Datastream. Use at own risk. This package makes use of the DatastreamDSWS2R package from CharlesCara on Github for DataStream Connections.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">Refinitiv</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9004</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="important-messages">Important messages:<a class="anchor" aria-label="anchor" href="#important-messages"></a>
</h1></div>
<p>You can now use both Eikon and Workspace. The package only supports a desktop session not platform sessions. This is theoretically possible but currently not implemented.</p>
<ol style="list-style-type: decimal">
<li>Python is now optional, the package can now also send direct JSON messages to the terminal.</li>
<li>When using the pyton libraries and if you update the package: also run <code><a href="reference/install_eikon.html">Refinitiv::install_eikon()</a></code> again.</li>
<li>Python Eikon and RDP libraries are depricated and can no longer be used. The current commit of the package is reverse compatible with previous commits.</li>
</ol>
<!-- badges: start -->
</div>
<div class="section level1">
<h1 id="refinitivr">RefinitivR<a class="anchor" aria-label="anchor" href="#refinitivr"></a>
</h1>
<p>An R interface to Refinitv Eikon and Refinitiv DataStream.</p>
<p>RefinitivR is an R interface to Refinitiv Eikon by using direct JSON messages or the reticulate package (Python Eikon/RDP api). It also provides access to DataStream using the DatastreamDSWS2R package. This package is in no way affiliated with Thomson Reuters,Refinitv, Eikon, Datastream or LSEG. A subscription to EIkon and Datastream is required to use this package. Use of the package is at own risk! This package uses the DatastreamDSWS2R package from CharlesCara (<a href="https://github.com/CharlesCara/DatastreamDSWS2R" class="external-link uri">https://github.com/CharlesCara/DatastreamDSWS2R</a>) for the DataStream Connections.</p>
<p>The reason that this package was developed is that the existing eikonapir package has stability issues leading to dropped api calls. This package gives multiple options for connecting with the Refinitiv API and retries also dropped api calls which will result in a much more stable api connection. Furthermore the package tries to be as robust as possible by automatically chunking long requests in api limit compliant pieces and retries failed requests in order to overcome http 400 errors.</p>
<p>An interface to the R datastream package DatastreamDSWS2R is also provided to allow for easy retrieval of information so that both Eikon and Datastream commands can be used from a single r package.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"GreenGrassBlueOcean/RefinitivR"</span><span class="op">)</span></span></code></pre></div>
<p>load the package</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://greengrassblueocean.github.io/RefinitivR/">Refinitiv</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="connecting-to-refinitiv-directly">Connecting to Refinitiv directly<a class="anchor" aria-label="anchor" href="#connecting-to-refinitiv-directly"></a>
</h1>
<p>When using the direct JSON method no python installation is necessary:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Eikon</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/EikonConnect.html">EikonConnect</a></span><span class="op">(</span>Eikonapplication_id <span class="op">=</span> <span class="st">"YOUR EIKON API KEY"</span>, PythonModule <span class="op">=</span> <span class="st">"JSON"</span><span class="op">)</span></span>
<span><span class="va">RD</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/RDConnect.html">RDConnect</a></span><span class="op">(</span>application_id <span class="op">=</span>  <span class="st">"YOUR API KEY"</span>,  PythonModule <span class="op">=</span> <span class="st">"JSON"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="connecting-to-refinitiv-eikon-through-the-official-refinitiv-python-api">Connecting to Refinitiv Eikon through the official Refinitiv python API<a class="anchor" aria-label="anchor" href="#connecting-to-refinitiv-eikon-through-the-official-refinitiv-python-api"></a>
</h1>
<p>If one wants to use the Python RD Packages: Install the reticulate MiniConda environment r-eikon so that the python module RD can be used by the r-package.</p>
<p>Installation of the python packages (Run Rstudio with elevated permissions or as Administrator for the installation of the python libraries)</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">Refinitiv</span><span class="fu">::</span><span class="fu"><a href="reference/install_eikon.html">install_eikon</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Eikon</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/EikonConnect.html">EikonConnect</a></span><span class="op">(</span>Eikonapplication_id <span class="op">=</span> <span class="st">"YOUR EIKON API KEY"</span>, PythonModule <span class="op">=</span> <span class="st">"RD"</span><span class="op">)</span></span>
<span><span class="va">RD</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/RDConnect.html">RDConnect</a></span><span class="op">(</span>application_id <span class="op">=</span>  <span class="st">"YOUR API KEY"</span>,  PythonModule <span class="op">=</span> <span class="st">"RD"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level1">
<h1 id="working-with-refintiv-data-rd-libraries">Working with Refintiv Data (RD) libraries<a class="anchor" aria-label="anchor" href="#working-with-refintiv-data-rd-libraries"></a>
</h1>
<div class="section level2">
<h2 id="connecting">Connecting:<a class="anchor" aria-label="anchor" href="#connecting"></a>
</h2>
<p>(make sure that Eikon/LSEG WorkSpace is running and online)</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">RD</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/RDConnect.html">RDConnect</a></span><span class="op">(</span><span class="st">'your api key'</span>, PythonModule <span class="op">=</span> <span class="st">"JSON"</span><span class="op">)</span></span></code></pre></div>
<p>or when you have installed the python environment using <code><a href="reference/install_eikon.html">Refinitiv::install_eikon()</a></code> you can also use:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">RD</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/RDConnect.html">RDConnect</a></span><span class="op">(</span><span class="st">'your api key'</span>, PythonModule <span class="op">=</span> <span class="st">"RD"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="searching">Searching:<a class="anchor" aria-label="anchor" href="#searching"></a>
</h2>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">test</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/RDPsearch.html">RDPsearch</a></span><span class="op">(</span><span class="va">RD</span>, query <span class="op">=</span>  <span class="st">"AAPL.O"</span><span class="op">)</span></span>
<span> <span class="va">test</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/RDPsearch.html">RDPsearch</a></span><span class="op">(</span><span class="va">RD</span>, query <span class="op">=</span>  <span class="st">"AAPL.O"</span>, select <span class="op">=</span> <span class="st">"ContractType,RIC"</span><span class="op">)</span></span>
<span></span>
<span> <span class="va">Presidents</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/RDPsearch.html">RDPsearch</a></span><span class="op">(</span> <span class="va">RD</span>, view <span class="op">=</span> <span class="st">"People"</span>, query <span class="op">=</span> <span class="st">'president'</span></span>
<span>                        , filter <span class="op">=</span> <span class="st">"startswith(LastName,'H')"</span></span>
<span>                        , select <span class="op">=</span> <span class="st">'DocumentTitle'</span></span>
<span>                        , boost <span class="op">=</span> <span class="st">''</span></span>
<span>                        , order_by <span class="op">=</span> <span class="st">'DocumentTitle asc'</span></span>
<span>                        , group_by <span class="op">=</span> <span class="st">'FirstName'</span></span>
<span>                        , group_count <span class="op">=</span> <span class="fl">2</span></span>
<span>                        , top <span class="op">=</span> <span class="fl">20</span></span>
<span>                        <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-history">Get History<a class="anchor" aria-label="anchor" href="#get-history"></a>
</h2>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">timeseries1</span> <span class="op">&lt;-</span>  <span class="fu"><a href="reference/rd_GetHistory.html">rd_GetHistory</a></span><span class="op">(</span>RDObject <span class="op">=</span> <span class="va">RD</span>, universe<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AAPL.O"</span>, <span class="st">"NVDA.O"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">Datarequest</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/rd_GetHistory.html">rd_GetHistory</a></span><span class="op">(</span> RDObject <span class="op">=</span> <span class="va">RD</span>, universe <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"GOOG.O"</span>,<span class="st">"AAPL.O"</span><span class="op">)</span></span>
<span>                            , fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TR.Revenue"</span>,<span class="st">"TR.GrossProfit"</span><span class="op">)</span></span>
<span>                            , parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"SDate"</span> <span class="op">=</span> <span class="st">"0CY"</span>, <span class="st">"Curn"</span> <span class="op">=</span> <span class="st">"CAD"</span><span class="op">)</span></span>
<span>                            <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-data">Get Data<a class="anchor" aria-label="anchor" href="#get-data"></a>
</h2>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex1</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/rd_GetData.html">rd_GetData</a></span><span class="op">(</span> RDObject <span class="op">=</span> <span class="va">RD</span>, rics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MMM"</span>, <span class="st">"III.L"</span><span class="op">)</span></span>
<span>                 , Eikonformulas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span> <span class="st">"TR.PE(Sdate=0D)/*P/E (LTM) - Diluted Excl*/"</span></span>
<span>                                    , <span class="st">"TR.CompanyName"</span><span class="op">)</span></span>
<span>                 , verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>                 <span class="op">)</span></span>
<span></span>
<span> <span class="va">ex2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/rd_GetData.html">rd_GetData</a></span><span class="op">(</span> RDObject <span class="op">=</span> <span class="va">RD</span>, rics <span class="op">=</span> <span class="st">"AAPL.O"</span></span>
<span>                  , Eikonformulas <span class="op">=</span> <span class="st">"TR.CompanyMarketCap(Sdate=0D)/*Market Cap*/"</span></span>
<span>                  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="historical-timeseries">Historical timeseries<a class="anchor" aria-label="anchor" href="#historical-timeseries"></a>
</h2>
<div class="section level3">
<h3 id="intraday-timeseries">Intraday Timeseries<a class="anchor" aria-label="anchor" href="#intraday-timeseries"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Daily - Count</span></span>
<span><span class="va">Intraday_vod</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/rd_GetHistoricalPricing.html">rd_GetHistoricalPricing</a></span><span class="op">(</span> universe <span class="op">=</span> <span class="st">"VOD.L"</span>, interval <span class="op">=</span> <span class="st">"P1D"</span></span>
<span>                                       , count <span class="op">=</span> <span class="fl">20L</span>, RDObject <span class="op">=</span> <span class="va">RD</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="interday-timeseries">Interday Timeseries<a class="anchor" aria-label="anchor" href="#interday-timeseries"></a>
</h3>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 1 minute - Count - All Sessions</span></span>
<span><span class="va">Vodafone</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/rd_GetHistoricalPricing.html">rd_GetHistoricalPricing</a></span><span class="op">(</span> universe <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"VOD.L"</span>, <span class="st">"AAPL.O"</span><span class="op">)</span></span>
<span>                                   , interval <span class="op">=</span> <span class="st">"PT1M"</span>, count <span class="op">=</span> <span class="fl">500L</span></span>
<span>                                   , sessions<span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pre"</span>,<span class="st">"normal"</span>,<span class="st">"post"</span><span class="op">)</span></span>
<span>                                   , RDObject <span class="op">=</span> <span class="va">RD</span></span>
<span>                                   <span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="custom-instruments">Custom Instruments<a class="anchor" aria-label="anchor" href="#custom-instruments"></a>
</h2>
<div class="section level3">
<h3 id="connecting-for-custom-instruments">Connecting for Custom Instruments<a class="anchor" aria-label="anchor" href="#connecting-for-custom-instruments"></a>
</h3>
<ol style="list-style-type: decimal">
<li>Custom Instruments can only be created using JSON connection method.</li>
<li>UUID Parameter: Eikon UUID can be found here: Eikon Terminal –&gt; help –&gt; about –&gt; user details: UUID e.g. ABCDE-123456</li>
</ol>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/RDConnect.html">RDConnect</a></span><span class="op">(</span>application_id <span class="op">=</span> <span class="cn">NA</span>, PythonModule <span class="op">=</span> <span class="st">"JSON"</span>, UUID <span class="op">=</span> <span class="st">"ABCDE-123456"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="create-a-simple-instrument">Create a Simple Instrument:<a class="anchor" aria-label="anchor" href="#create-a-simple-instrument"></a>
</h3>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rd_ManageCustomInstruments.html">rd_ManageCustomInstruments</a></span><span class="op">(</span> operation <span class="op">=</span> <span class="st">"CREATE"</span>, symbol <span class="op">=</span> <span class="st">"testAAPLandAMZN"</span></span>
<span>                          , formula <span class="op">=</span> <span class="st">"AAPL.O + AMZN.O"</span><span class="op">)</span></span></code></pre></div>
<p>Get instrument details</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rd_ManageCustomInstruments.html">rd_ManageCustomInstruments</a></span><span class="op">(</span>operation <span class="op">=</span> <span class="st">"GET"</span>, symbol <span class="op">=</span> <span class="st">"testAAPLandAMZN"</span><span class="op">)</span></span></code></pre></div>
<p>Update Instrument formula</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rd_ManageCustomInstruments.html">rd_ManageCustomInstruments</a></span><span class="op">(</span> operation <span class="op">=</span> <span class="st">"UPDATE"</span>, symbol <span class="op">=</span> <span class="st">"testAAPLandAMZN"</span></span>
<span>                          , formula <span class="op">=</span> <span class="st">"AAPL.O + 2 * AMZN.O"</span><span class="op">)</span></span></code></pre></div>
<p>Delete</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rd_ManageCustomInstruments.html">rd_ManageCustomInstruments</a></span><span class="op">(</span>operation <span class="op">=</span> <span class="st">"DELETE"</span>, symbol <span class="op">=</span> <span class="st">"testAAPLandAMZN"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="build-a-custom-instrument-out-of-a-basket-of-instruments">Build a custom instrument out of a basket of instruments<a class="anchor" aria-label="anchor" href="#build-a-custom-instrument-out-of-a-basket-of-instruments"></a>
</h3>
<p>Build the basket:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">basket</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/CustomInstrumentBasketBuilder.html">CustomInstrumentBasketBuilder</a></span><span class="op">(</span>RICs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AAPL.O"</span>, <span class="st">"AMZN.O"</span><span class="op">)</span>, Weights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Create a custom instrument with the basket”:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rd_ManageCustomInstruments.html">rd_ManageCustomInstruments</a></span><span class="op">(</span>operation <span class="op">=</span> <span class="st">"CREATE"</span>, symbol <span class="op">=</span> <span class="st">"InterestingBasket"</span>,</span>
<span>                               basket <span class="op">=</span> <span class="va">basket</span>, currency <span class="op">=</span> <span class="st">"USD"</span><span class="op">)</span></span></code></pre></div>
<p>Create holidays for the instrument:</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">holidays</span> <span class="op">&lt;-</span>  <span class="fu"><a href="reference/CustomInstrumentHolidayBuilder.html">CustomInstrumentHolidayBuilder</a></span><span class="op">(</span> dates <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2023-12-01"</span>, <span class="st">"2023-12-31"</span><span class="op">)</span></span>
<span>                                           , reasons <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Special Bank Holiday 1"</span></span>
<span>                                                       , <span class="st">"Special Bank Holiday 2"</span><span class="op">)</span></span>
<span>                                           <span class="op">)</span></span></code></pre></div>
<p>Update the basket with some holidays:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rd_ManageCustomInstruments.html">rd_ManageCustomInstruments</a></span><span class="op">(</span>operation <span class="op">=</span> <span class="st">"UPDATE"</span>, symbol <span class="op">=</span> <span class="st">"InterestingBasket"</span>,</span>
<span>                           holidays <span class="op">=</span> <span class="va">holidays</span> <span class="op">)</span></span></code></pre></div>
<p>Delete instrument:</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/rd_ManageCustomInstruments.html">rd_ManageCustomInstruments</a></span><span class="op">(</span>operation <span class="op">=</span> <span class="st">"DELETE"</span>, symbol <span class="op">=</span> <span class="st">"InterestingBasket"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="useful-add-on-functions">Useful add on functions<a class="anchor" aria-label="anchor" href="#useful-add-on-functions"></a>
</h3>
<p>List all created and active custom instruments:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">AllActiveCustomInstruments</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/rd_SearchCustomInstruments.html">rd_SearchCustomInstruments</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Custom instruments come in very specific RIC format. To ease the use of the package RefinitivR create this specific format for you. The following formula allows to retrieve the official custom instrument name (RIC).</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">RealInstrumentName</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/CorrectCustomInstrument.html">CorrectCustomInstrument</a></span><span class="op">(</span><span class="st">"InterestingBasket"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="omm-streaming-beta-version-will-still-change-in-future">OMM streaming (beta version will still change in future)<a class="anchor" aria-label="anchor" href="#omm-streaming-beta-version-will-still-change-in-future"></a>
</h2>
<p>Create streaming object</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">OMM_ws</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/create_OMM_Stream.html">create_OMM_Stream</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">EUR_stream</span> <span class="op">&lt;-</span> <span class="va">OMM_ws</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"EUR="</span>, fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"BID"</span>,<span class="st">"ASK"</span>,<span class="st">"OPEN_PRC"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># start stream</span></span>
<span><span class="va">EUR_stream</span><span class="op">$</span><span class="fu">connect</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># stop stream</span></span>
<span><span class="va">EUR_stream</span><span class="op">$</span><span class="fu">close</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level1">
<h1 id="working-with-the-legacy-eikon-functions">Working with the Legacy Eikon functions<a class="anchor" aria-label="anchor" href="#working-with-the-legacy-eikon-functions"></a>
</h1>
<div class="section level2">
<h2 id="connecting-1">Connecting<a class="anchor" aria-label="anchor" href="#connecting-1"></a>
</h2>
<p>(make sure that Eikon/LSEG WorkSpace is running and online)</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">Eikon</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/EikonConnect.html">EikonConnect</a></span><span class="op">(</span>Eikonapplication_id <span class="op">=</span> <span class="st">"YOUR EIKON API KEY"</span>, PythonModule <span class="op">=</span> <span class="st">"JSON"</span><span class="op">)</span></span></code></pre></div>
<p>or when you have installed the python environment using <code><a href="reference/install_eikon.html">Refinitiv::install_eikon()</a></code> you can also use:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">Eikon</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/EikonConnect.html">EikonConnect</a></span><span class="op">(</span>Eikonapplication_id <span class="op">=</span> <span class="st">"YOUR EIKON API KEY"</span>, PythonModule <span class="op">=</span> <span class="st">"RD"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-news-stories">Getting News Stories<a class="anchor" aria-label="anchor" href="#getting-news-stories"></a>
</h2>
<p>Scan the headlines</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">headlines</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/EikonGetNewsHeadlines.html">EikonGetNewsHeadlines</a></span><span class="op">(</span> EikonObject <span class="op">=</span> <span class="va">Eikon</span></span>
<span>                                   , query <span class="op">=</span> <span class="st">"R:MSFT.O"</span>, count <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p>Get the news stories</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stories</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/EikonGetNewsStory.html">EikonGetNewsStory</a></span><span class="op">(</span>story_id <span class="op">=</span> <span class="va">headlines</span><span class="op">$</span><span class="va">storyId</span>, EikonObject <span class="op">=</span> <span class="va">Eikon</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="performing-a-timeseries-request">Performing a timeseries request<a class="anchor" aria-label="anchor" href="#performing-a-timeseries-request"></a>
</h2>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Timeseries</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/EikonGetTimeseries.html">EikonGetTimeseries</a></span><span class="op">(</span> EikonObject <span class="op">=</span> <span class="va">Eikon</span>, rics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MMM"</span>, <span class="st">"III.L"</span><span class="op">)</span>,</span>
<span>                                , start_date <span class="op">=</span> <span class="st">"2020-01-01T01:00:00"</span>,</span>
<span>                                , end_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"T01:00:00"</span><span class="op">)</span></span>
<span>                                <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="performing-a-request-for-a-monthly-economic-timeseries">Performing a request for a monthly economic timeseries<a class="anchor" aria-label="anchor" href="#performing-a-request-for-a-monthly-economic-timeseries"></a>
</h2>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">EconTimeSeries</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/EikonGetTimeseries.html">EikonGetTimeseries</a></span><span class="op">(</span> EikonObject <span class="op">=</span> <span class="va">Eikon</span></span>
<span>                                      , rics <span class="op">=</span> <span class="st">"USCPI=ECI"</span></span>
<span>                                      , interval <span class="op">=</span> <span class="st">"monthly"</span></span>
<span>                                      , fields <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">)</span></span>
<span>                                      , start_date <span class="op">=</span> <span class="st">"2020-01-01T01:00:00"</span>,</span>
<span>                                      , end_date <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.Date</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"T01:00:00"</span><span class="op">)</span></span>
<span>                                      <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="performing-a-data-request">Performing a data request<a class="anchor" aria-label="anchor" href="#performing-a-data-request"></a>
</h2>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/EikonGetData.html">EikonGetData</a></span><span class="op">(</span>EikonObject <span class="op">=</span> <span class="va">Eikon</span>, rics <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"MMM"</span>, <span class="st">"III.L"</span><span class="op">)</span>,</span>
<span>                     Eikonformulas <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"TR.PE(Sdate=0D)/*P/E (LTM) - Diluted Excl*/"</span>, <span class="st">"TR.CompanyName"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="retrieving-large-integers-with-eikongetdata-python-only-not-for-json-method">Retrieving large integers with EikonGetData (Python only, not for JSON method)<a class="anchor" aria-label="anchor" href="#retrieving-large-integers-with-eikongetdata-python-only-not-for-json-method"></a>
</h3>
<p>There is currently an issue with the reticulate package handling large integers (like e.g. market capatilization) from python to r. This issue is described <a href="https://github.com/rstudio/reticulate/issues/323" class="external-link">here</a> and try for yourself <a href="https://community.rstudio.com/t/large-integer-conversion-from-python-to-r/82568" class="external-link">here</a></p>
<p>This leads to the following behaviour:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex2</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/EikonGetData.html">EikonGetData</a></span><span class="op">(</span> EikonObject <span class="op">=</span> <span class="va">Eikon</span>, rics <span class="op">=</span> <span class="st">"AAPl.O"</span></span>
<span>                    , Eikonformulas <span class="op">=</span> <span class="st">"TR.CompanyMarketCap(Sdate=0D)/*Market Cap*/"</span></span>
<span>                    <span class="op">)</span></span></code></pre></div>
<p>ex2 will return <code>-1</code> for the Market capitalization. Which can never be the correct number. A workaround is to scale back the expected output to a smaller number. By expressing the market capatalization in millions the produced integer becomes smaller and so prevents the integer of becoming too large. This can be done by adding a named list in the parameters field: <code>Parameters = list("scale" = 6)</code> in which the <code>6</code> stands for millions.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex2a</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/EikonGetData.html">EikonGetData</a></span><span class="op">(</span> EikonObject <span class="op">=</span> <span class="va">Eikon</span>, rics <span class="op">=</span> <span class="st">"AAPl.O"</span></span>
<span>                    , Eikonformulas <span class="op">=</span> <span class="st">"TR.CompanyMarketCap(Sdate=0D)/*Market Cap*/"</span></span>
<span>                    , Parameters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"scale"</span> <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span>
<span>                    <span class="op">)</span></span></code></pre></div>
<p>Or for more complex formula’s scale back in the formula itself by adding <code>scale = 6</code> to <code>TR.CompanyMarketCap</code></p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex2b</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/EikonGetData.html">EikonGetData</a></span><span class="op">(</span> EikonObject <span class="op">=</span> <span class="va">Eikon</span>, rics <span class="op">=</span> <span class="st">"AAPl.O"</span></span>
<span>                    , Eikonformulas <span class="op">=</span> <span class="st">"TR.CompanyMarketCap(Sdate=0D, scale=6)/*Market Cap*/"</span></span>
<span>                    <span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
<div class="section level1">
<h1 id="datastream">DataStream<a class="anchor" aria-label="anchor" href="#datastream"></a>
</h1>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">DatastreamUserName</span> <span class="op">&lt;-</span> <span class="st">"Your datastream username"</span></span>
<span><span class="va">DatastreamPassword</span> <span class="op">&lt;-</span> <span class="st">"Your datastream password"</span></span>
<span><span class="va">DataStream</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/DataStreamConnect.html">DataStreamConnect</a></span><span class="op">(</span><span class="va">DatastreamUserName</span>, <span class="va">DatastreamPassword</span><span class="op">)</span></span>
<span></span>
<span><span class="va">DSResult</span> <span class="op">&lt;-</span> <span class="va">DataStream</span><span class="op">$</span><span class="fu">snapshotRequest</span><span class="op">(</span>instrument <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ABF"</span>,<span class="st">"RIO"</span>,<span class="st">"WPP"</span><span class="op">)</span>,</span>
<span>                                       datatype <span class="op">=</span> <span class="st">"P"</span>,</span>
<span>                                       requestDate <span class="op">=</span> <span class="st">"0D"</span><span class="op">)</span></span></code></pre></div>
<p>For further details on accessing datastream see <a href="https://github.com/CharlesCara/DatastreamDSWS2R" class="external-link uri">https://github.com/CharlesCara/DatastreamDSWS2R</a>.</p>
<p>licensing see LICENSE File!</p>
</div>

  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>LGPL (&gt;= 2.0, &lt; 3) | Mozilla Public License</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing Refinitiv</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Laurens van der Burg <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://app.codecov.io/gh/GreenGrassBlueOcean/RefinitivR" class="external-link"><img src="https://codecov.io/gh/GreenGrassBlueOcean/RefinitivR/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://github.com/GreenGrassBlueOcean/RefinitivR/actions" class="external-link"><img src="https://github.com/GreenGrassBlueOcean/RefinitivR/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Laurens van der Burg.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
